<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChivoSpot | Panel Administrador</title>
  <meta name="description" content="Gestiona organizadores y controla todos los eventos publicados en ChivoSpot.">
  <link rel="canonical" href="./admin.html">
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./assets/icons/favicon.svg" type="image/svg+xml">
  <meta property="og:title" content="Panel administrador | ChivoSpot">
  <meta property="og:description" content="Crea organizadores y administra eventos para toda la plataforma.">
  <meta property="og:image" content="./assets/icons/og-image.png">
  <link rel="stylesheet" href="./styles/base.css">
  <link rel="stylesheet" href="./styles/layout.css">
  <link rel="stylesheet" href="./styles/components.css">
</head>
<body>
  <header class="site-header">
    <div class="wrapper header-inner">
      <a class="brand" href="./index.html" aria-label="Volver al inicio">
        <span aria-hidden="true">⬅</span>
        <span class="brand-text">ChivoSpot</span>
      </a>
      <h1 class="page-title">Panel de administración</h1>
      <div class="header-actions">
        <span class="badge">Sesión: <strong id="adminName"></strong></span>
        <button id="logoutBtn" class="btn btn-ghost" type="button">Cerrar sesión</button>
      </div>
    </div>
  </header>

  <main class="wrapper dashboard" id="mainContent">
    <section class="dashboard-section" aria-labelledby="statsTitle">
      <h2 id="statsTitle" class="section-title">Resumen del sistema</h2>
      <div class="stats-grid">
        <article class="stat-card">
          <h3>Eventos publicados</h3>
          <p id="statsEvents" class="stat-value">0</p>
          <p class="stat-note">Total disponibles en la plataforma.</p>
        </article>
        <article class="stat-card">
          <h3>Organizadores activos</h3>
          <p id="statsOrganizers" class="stat-value">0</p>
          <p class="stat-note">Con acceso vigente al panel.</p>
        </article>
        <article class="stat-card">
          <h3>Eventos próximos</h3>
          <p id="statsUpcoming" class="stat-value">0</p>
          <p class="stat-note">Fecha de inicio posterior a hoy.</p>
        </article>
      </div>
    </section>

    <section class="dashboard-section" aria-labelledby="organizerFormTitle">
      <div class="section-header">
        <h2 id="organizerFormTitle" class="section-title">Crear organizador</h2>
      </div>
      <form id="organizerForm" class="form-grid" autocomplete="off">
        <label class="label" for="orgNombre">Nombre completo
          <input id="orgNombre" name="nombre" type="text" required>
        </label>
        <label class="label" for="orgEmail">Correo electrónico
          <input id="orgEmail" name="email" type="email" required>
        </label>
        <label class="label" for="orgTelefono">Teléfono (opcional)
          <input id="orgTelefono" name="telefono" type="tel" placeholder="+503 ...">
        </label>
        <label class="label" for="orgPassword">Contraseña
          <input id="orgPassword" name="password" type="password" required minlength="6">
        </label>
        <button type="submit" class="btn btn-primary">Crear organizador</button>
      </form>
      <p id="organizerFeedback" class="alert" hidden role="status"></p>
      <div class="table-wrapper">
        <table class="table" aria-describedby="organizerFormTitle">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Correo</th>
              <th>Teléfono</th>
              <th>Creado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="organizerTableBody"></tbody>
        </table>
      </div>
    </section>

    <section class="dashboard-section" aria-labelledby="eventFormTitle">
      <div class="section-header">
        <h2 id="eventFormTitle" class="section-title">Gestionar eventos</h2>
      </div>
      <form id="eventForm" class="form-grid" autocomplete="off">
        <input type="hidden" name="slug">
        <label class="label" for="eventTitleInput">Título del evento
          <input id="eventTitleInput" name="titulo" type="text" required>
        </label>
        <label class="label" for="eventZone">Zona
          <select id="eventZone" name="zona" required></select>
        </label>
        <label class="label" for="eventMunicipio">Municipio/colonia
          <input id="eventMunicipio" name="municipio" type="text" required>
        </label>
        <label class="label" for="eventLugar">Lugar
          <input id="eventLugar" name="lugar" type="text" required>
        </label>
        <label class="label" for="eventInicio">Fecha y hora de inicio
          <input id="eventInicio" name="fechaInicio" type="datetime-local" required>
        </label>
        <label class="label" for="eventFin">Fecha y hora de cierre
          <input id="eventFin" name="fechaFin" type="datetime-local">
        </label>
        <label class="label" for="eventLat">Latitud
          <input id="eventLat" name="lat" type="number" step="0.000001" required>
        </label>
        <label class="label" for="eventLon">Longitud
          <input id="eventLon" name="lon" type="number" step="0.000001" required>
        </label>
        <label class="label" for="eventCategoria">Categoría
          <select id="eventCategoria" name="categoria">
            <option value="musica">Música</option>
            <option value="teatro">Teatro</option>
            <option value="ferias">Ferias</option>
            <option value="deporte">Deporte</option>
            <option value="conferencias">Conferencias</option>
            <option value="familia">Familia</option>
          </select>
        </label>
        <label class="label" for="eventPrecioMin">Precio mínimo (USD)
          <input id="eventPrecioMin" name="precioMin" type="number" min="0" step="0.01" value="0">
        </label>
        <label class="label" for="eventPrecioMax">Precio máximo (USD)
          <input id="eventPrecioMax" name="precioMax" type="number" min="0" step="0.01" value="0">
        </label>
        <label class="label" for="eventImagen">URL de imagen
          <input id="eventImagen" name="imagen" type="url" placeholder="https://">
        </label>
        <label class="label" for="eventDescripcion">Descripción
          <textarea id="eventDescripcion" name="descripcion" rows="3" required></textarea>
        </label>
        <label class="label" for="eventEnlace">Enlace externo
          <input id="eventEnlace" name="enlace" type="url" placeholder="https://">
        </label>
        <label class="label" for="eventOwner">Asignar a
          <select id="eventOwner" name="propietario"></select>
        </label>
        <button id="eventSubmit" type="submit" class="btn btn-primary">Crear evento</button>
      </form>
      <p id="eventFeedback" class="alert" hidden role="status"></p>
      <div class="table-wrapper">
        <table class="table" aria-describedby="eventFormTitle">
          <thead>
            <tr>
              <th>Título</th>
              <th>Zona</th>
              <th>Fecha de inicio</th>
              <th>Precio</th>
              <th>Responsable</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="eventsTableBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="wrapper footer-inner">
      <p>&copy; <span id="yearCopy"></span> ChivoSpot. Administración centralizada.</p>
      <a href="./sitemap.xml">Mapa del sitio</a>
    </div>
  </footer>

  <script type="module" src="./scripts/admin.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const yearCopy = document.querySelector('#yearCopy');
      if (yearCopy) {
        yearCopy.textContent = new Date().getFullYear();
      }
    });
  </script>
</body>
</html>
